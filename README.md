# Шаблон приложения на PHP Slim v4

Этот шаблон предназначен для быстрого старта разработки проектов на базе PHP фреймворка Slim четвёртой версии.

## Начало работы

### Основные требования

Для корректной работы данного шаблона требуется:

- PHP v8.3

### Базовая конфигурация приложения

В проекте предустановлены следующие переменные окружения, необходимые для работы приложения. При необходимости, их можно переопределить или убрать:

- `LOG_ERRORS` - Включает логирование ошибок. Требуется для инициализации обработчика ошибок. По умолчанию включено.
- `LOG_ERROR_DETAILS` - Включает детальное логирование ошибок. Требуется для инициализации обработчика ошибок. По умолчанию включено.
- `ERROR_DETAILS` - Включает отображение детальной информации об ошибках. Требуется для инициализации обработчика ошибок. По умолчанию включено.
- `USE_SINGLE_ENTRYPOINT` - Использует единую точку входа. При включении данной опции *не будут* регистрироваться роуты в приложении, кроме одного.
- `ENDPOINT` - Адрес точки входа. По умолчанию установлен на `/api`.

### Регистрация зависимостей и маршрутов

Для регистрации зависимостей в приложении необходимо наследоваться от `ContainerProvider`. Затем прописать провайдер в файле `definitions.php` в директории `config`. Учтите, что наследование от указанного интерфейса обязательно.

Для регистрации маршрутов в приложении необходимо наследоваться от `RouteProvider`. Затем прописать провайдер в файле `routes.php` в директории `config`. Учтите, что наследование от указанного интерфейса обязательно.

Для регистрации своего маршрута или группы маршрутов предусмотрены классы: `Route` и `Group`.

В директории `src/Application` располагается тестовое использование данного шаблона, где можно ознакомиться с применением вышеописанных правил.

## Примеры использования

### Регистрация зависимостей

```php
# TestDefinitions.php
class TestDefinitions implements ContainerProvider
{
    public function getDefinitions(): array
    {
        return [
            TestController::class => autowire()
        ];
    }
}

# config/definitions.php
return [
    TestDefinitions::class,
];
```

### Регистрация рутов

```php
# TestRoutesProvider.php
class TestRoutesProvider implements RouteProvider
{
    public function getRoutes(): array
    {
        return [
            Route::get('/test-route', TestController::class)
        ];
    }
}

# config/routes.php
return [
    TestRoutesProvider::class,
];
```